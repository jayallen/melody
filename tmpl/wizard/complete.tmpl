<mt:setvarblock name="page_title"><__trans phrase="Config File Created"></mt:setvarblock>
<mt:setvar name="complete" value="1">
<mt:include name="../cms/include/chromeless_header.tmpl">

<script type="text/javascript">
<!--
function go(mode) {
    var f = document.forms[0];
    f['__mode'].value = mode;
}

function toggleConfig() {
    var area = getByID('config_settings');
    var manually = getByID('manual');
    var automatically = getByID('automatic');
    if (area) {
        if (area.style.display == 'none') {
            area.style.display = 'block';
            manually.style.display = 'block';
            automatically.style.display = 'none';
        } else {
            area.style.display = 'none';
            manually.style.display = 'none';
            automatically.style.display = 'block';
        }
    }
}
// -->
</script>

<form method="post">
<input type="hidden" name="__mode" value="" />
<input type="hidden" name="step" value="seed" />
<input type="hidden" name="config" value="<mt:var name="config" escape="html">" />
<input type="hidden" name="set_static_uri_to" id="set_static_uri_to" value="<mt:var name=static_uri escape="html">">

<mt:if name="file_not_found">
    <mtapp:statusmsg
        id="file_not_found"
        class="error">
        <__trans phrase="You selected to create the mt-config.cgi file manually, however it could not be found. Please cut and paste the following text into a file called 'mt-config.cgi' into the root directory of Movable Type (the same directory in which mt.cgi is found).">
    </mtapp:statusmsg>

<p><__trans phrase="If you would like to check the directory permissions and retry, click the 'Retry' button."></p>
<mt:else>
<mt:unless name="config_created">

    <mtapp:statusmsg
        id="config_created"
        class="error">
        <__trans phrase="We were unable to create your Movable Type configuration file. This is most likely the result of a permissions problem. To resolve this problem you will need to make sure that your Movable Type home directory (the directory that contains mt.cgi) is writable by your web server.">
    </mtapp:statusmsg>

<p><__trans phrase="If you would like to check the directory permissions and retry, click the 'Retry' button."></p>

<mt:else>

<p class="ready intro">
<__trans phrase="Congratulations! You've successfully configured [_1]." params="<mt:var name=MT_PRODUCT_NAME>">
</p>

<p><__trans phrase="Your configuration settings have been written to the file <tt>[_1]</tt>. To reconfigure them, click the 'Back' button below." params="<mt:var name=CONFIG_FILE>">
</p>
</mt:unless>
</mt:if>

<mt:unless name="config_created">
<p>
<input id="manually" type="checkbox" name="manually" value="1" onclick="toggleConfig()" <mt:if name="manually">checked="checked"</mt:if>> <label for="manually"><__trans phrase="I will create the mt-config.cgi file manually."></label>
</p>
</mt:unless>

<div id="config_settings" <mt:unless name="manually">style="display: none;"</mt:unless>>

<textarea style="width: 100%; height: 300px; font-family: monospace" onclick="this.select()">
<mt:include name="mt-config.tmpl">
</textarea>
</div>

<p>
<div id="automatic" <mt:if name="FILE_NOT_FOUND">style="display:none;"</mt:if>>
<div class="left">
<input type="submit" value="<__trans phrase="Back">" onclick="go('previous_step')" />
</div>
<div class="right">
<mt:unless name=CONFIG_CREATED>
<input name="retry" type="submit" value="<__trans phrase="Retry">" onclick="go('retry')" />
<mt:else>
<input name="continue" type="submit" value="<__trans phrase="Continue">" onclick="document.location.href='<mt:var name="mt_script">'; return false" />
</mt:unless>
</div>
</div>
<div id="manual" <mt:unless name="file_not_found">style="display:none;"</mt:unless>>
<div class="left">
<input type="submit" value="<__trans phrase="Back">" onclick="go('retry')" />
</div>
<div class="right">
<input name="retry" type="submit" value="<__trans phrase="Continue">" onclick="go('retry')" />
</div>
</div>
</p>

</form>

<mt:include name="../cms/include/chromeless_footer.tmpl">
