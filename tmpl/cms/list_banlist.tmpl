<mt:setvarblock name="page_title"><__trans phrase="IP Banning Settings"></mt:setvarblock>
<mt:setvar name="ip_info" value="1">
<MTSetVarBlock name="content_nav">
    <mt:include name="include/cfg_content_nav.tmpl">
</MTSetVarBlock>
<mt:include name="include/header.tmpl">

<div id="list-banlist">

<script type="text/javascript">
<!--
function setCreateMode () {
	getByID('ip').value = '';
	getByID('create-inline-ipban').style.display = 'block';
	getByID('ip').focus();
}

function cancelCreateMode () {
	getByID('create-inline-ipban').style.display = 'none';
}

var tableSelect;
function init()
{
	// setup
	tableSelect = new TC.TableSelect( "selector" );
	tableSelect.rowSelect = true;
}

TC.attachLoadEvent( init );
// -->
</script>

<mt:if name="error">
<mtapp:statusmsg
    id="generic-error"
    class="error">
    <mt:var name="error">
</mtapp:statusmsg>
</mt:if>

<mt:if name="saved">
    <mtapp:statusmsg
        id="saved"
        class="success">
        <__trans phrase="You have added [_1] to your list of banned IP addresses." params="<mt:var name="saved" escape="html">">
    </mtapp:statusmsg>
</mt:if>

<mt:if name="saved_deleted">
    <mtapp:statusmsg
        id="saved-deleted"
        class="success">
        <__trans phrase="You have successfully deleted the selected IP addresses from the list.">
    </mtapp:statusmsg>
</mt:if>

<mt:if name="show_ip_info">
<p><img src="<mt:var name="static_uri">images/status_icons/create.gif" alt="<__trans phrase="Ban New IP Address">" width="9" height="9" />
<a href="#" onclick="setCreateMode()"><__trans phrase="Ban New IP Address"></a></p>
</mt:if>

<div class="create-inline" id="create-inline-ipban">
    <form method="post" action="<mt:var name="script_url">">
        <input type="hidden" name="blog_id" value="<mt:var name="blog_id">" />
        <input type="hidden" name="__mode" value="save" />
        <input type="hidden" name="_type" value="banlist" />
        <input type="hidden" name="return_args" value="<mt:var name="return_args" escape="html">" />
        <input type="hidden" name="magic_token" value="<mt:var name="magic_token">" />
        <p>
            <label for="ip"><__trans phrase="IP Address">:</label> <input name="ip" id="ip" value="<mt:var name="ip">" maxlength="15" />
            &nbsp;
            <input type="submit" name="save" value="<__trans phrase="Ban IP Address">" />
            <input type="button" name="cancel" value="<__trans phrase="Cancel">" onclick="cancelCreateMode(); return false" />
        </p>
    </form>
</div>

<mt:if name="object_loop">
<form method="post" action="<mt:var name="script_url">" onsubmit="return this['__mode'] ? true : false;" id="myform">
    <input type="hidden" name="__mode" value="" />
    <input type="hidden" name="_type" value="banlist" />
    <input type="hidden" name="blog_id" value="<mt:var name="blog_id">" />
    <input type="hidden" name="magic_token" value="<mt:var name="magic_token">" />
    <input type="hidden" name="action_name" value="" />
    <input type="hidden" name="itemset_action_input" value="" />
    <input type="hidden" name="return_args" value="<mt:var name="return_args" escape="html">" />

    <div class="list" id="selector">
        <table cellspacing="0">
            <thead>
                <tr>
                <th class="cb"><input type="checkbox" value="all" class="select" /></th>
                <th id="bt-ip"><__trans phrase="IP Address"></th>
                <th id="bt-date"><__trans phrase="Date Banned"></th>
                </tr>
            </thead>
            <tbody>
                <mt:loop name="object_loop">
                <tr class="<mt:if name="__odd__">odd<mt:else>even</mt:if>">
                <td class="cb"><input type="checkbox" name="id" class="select" value="<mt:var name="id">" /></td>
                <td><mt:var name="ip"></td>
                <td><mt:var name="created_on_formatted"></td>
                </tr>
                </mt:loop>
            </tbody>
        </table>
    </div>
    <div class="list-actions">
        <div class="button-bar">
            <input onclick="doRemoveItems(this.form, '<__trans phrase="IP address">', '<__trans phrase="IP addresses">')" type="button" value="<__trans phrase="Delete">" />
        </div>
    </div>

</form>
<mt:else>
    <mtapp:statusmsg
        id="no-ip"
        class="info">
        <__trans phrase="No banned IPs have been added.">
    </mtapp:statusmsg>
</mt:if>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>

<mt:include name="include/footer.tmpl">
