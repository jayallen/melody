<mt:setvarblock name="page_title"><__trans phrase="Restore"></mt:setvarblock>
<mt:setvar name="restore" value="1">
<MTSetVarBlock name="content_header">
</MTSetVarBlock>
<MTSetVarBlock name="content_nav">
    <mt:include name="include/tools_content_nav.tmpl">
</MTSetVarBlock>

<mt:include name="include/header.tmpl">

<mt:if name="error">
    <mtapp:statusmsg
        id="generic-error"
        class="error">
        <mt:var name="error">
    </mtapp:statusmsg>
</mt:if>

<div id="restore-panel">
    <mt:if name="missing_sax">
        <mtapp:statusmsg
            id="missing-sax"
            class="error">
            <__trans phrase="Perl module XML::SAX and/or its dependencies are missing - Movable Type can not restore the system without it.">
        </mtapp:statusmsg>
    <mt:else>
    <form method="post" enctype="multipart/form-data" action="<mt:var name="script_url">">
        <input type="hidden" name="__mode" value="restore" />
        <input type="hidden" name="magic_token" value="<mt:var name="magic_token">" />
        <fieldset style="margin-top: 0px;">

    <mtapp:setting
        id="file"
        label="<__trans phrase="Upload backup file">"
        hint="<__trans phrase="If your backup file is located on your computer, you can upload it here.  Otherwise, Movable Type will automatically look in the 'import' folder of your Movable Type directory.">"
        help_page="backup_restore"
        help_section="source_file">
                    <input name="file" type="file" />
    </mtapp:setting>
    <mtapp:setting
        id="ignore_schema_conflict"
        label="<__trans phrase="Version verification">"
        hint="<__trans phrase="Check this and files backed up from newer versions can be restored to this system.  NOTE: Ignoring Schema Version can damage Movable Type permanently.">">
                    <input name="ignore_schema_conflict" type="checkbox" />&nbsp;<label for="ignore_schema_conflict"><__trans phrase="Ignore schema version conflict"></label>
    </mtapp:setting>
            <p style="text-align: center;"><input type="submit" value="<__trans phrase="Restore">" title="<__trans phrase="Restore (r)">" accesskey="r" /></p>
        </fieldset>
    </form>
    </mt:if>
</div>

<MTIgnore>
    
    <!-- THE FOLLOWING CODE NEEDS TO BE ADDED TO THE onload EVENT FOR THIS PAGE. -->
    <!-- This edit was made to allow use of the common footer. -->
    
    <mt:if name="open_dialog">
    <script type="text/javascript">
    <!--
    openDialog(false, 'dialog_restore_upload', 'magic_token=<mt:var name="magic_token">&amp;files=<mt:var name="files">&amp;assets=<mt:var name="assets">&amp;current_file=<mt:var name="filename">&amp;last=<mt:var name="last">&amp;schema_version=<mt:var name="schema_version">&amp;redirect=1;');
    //-->
    </script>
    </mt:if>
</MTIgnore>

<mt:include name="include/footer.tmpl">
