<mt:setvar name="page_title" value="<__trans phrase="Authenticated Commenters">">
<mt:setvarblock name="content_header">
    <p class="page-desc"><__trans phrase="_USAGE_COMMENTERS_LIST" params="<mt:var name="blog_name" escape="html">"></p>

    <mt:if name="trusted">
        <mtapp:statusmsg
            id="trusted"
            class="success">
            <__trans phrase="The selected commenter(s) has been given trusted status.">
        </mtapp:statusmsg>
    </mt:if>

    <mt:if name="untrusted">
        <mtapp:statusmsg
            id="untrusted"
            class="success">
            <__trans phrase="Trusted status has been removed from the selected commenter(s).">
        </mtapp:statusmsg>
    </mt:if>

    <mt:if name="banned">
        <mtapp:statusmsg
            id="banned"
            class="success">
            <__trans phrase="The selected commenter(s) have been blocked from commenting.">
        </mtapp:statusmsg>
    </mt:if>

    <mt:if name="unbanned">
        <mtapp:statusmsg
            id="unbanned"
            class="success">
            <__trans phrase="The selected commenter(s) have been unbanned.">
        </mtapp:statusmsg>
    </mt:if>
</mt:setvarblock>
<mt:setvarblock name="related_content">
    <$mt:include name="include/display_options.tmpl"$>
    <$MTApp:PageActions from="list_commenter"$>
</mt:setvarblock>
<mt:setvarblock name="action_buttons">
    <mt:if name="can_edit_commenters">
    <mt:if name="id">
    <mt:unless name="commenter_approved">
    <input type="button" value="<__trans phrase="Trust">" onclick="doForMarkedInThisWindow(this.form, '<__trans phrase="commenter">', '<__trans phrase="commenters">', 'id', 'trust_commenter', {}, '<__trans phrase="to act upon">')" accesskey="t" title="<__trans phrase="Trust commenter"> (t)" />
    <mt:else>
    <input type="button" value="<__trans phrase="Untrust">" onclick="doForMarkedInThisWindow(this.form, '<__trans phrase="commenter">', '<__trans phrase="commenters">', 'id', 'itemset_action', {action_name:'untrust'}, '<__trans phrase="to act upon">')" accesskey="u" title="<__trans phrase="Untrust commenter"> (u)" />
    </mt:unless>
    <mt:unless name="commenter_banned">
    <input type="button" value="<__trans phrase="Ban">" onclick="doForMarkedInThisWindow(this.form, '<__trans phrase="commenter">', '<__trans phrase="commenters">', 'id', 'ban_commenter', {}, '<__trans phrase="to act upon">')" accesskey="b" title="<__trans phrase="Ban commenter"> (b)" />
    <mt:else>
    <input type="button" value="<__trans phrase="Unban">" onclick="doForMarkedInThisWindow(this.form, '<__trans phrase="commenter">', '<__trans phrase="commenters">', 'id', 'itemset_action', {action_name:'unban'}, '<__trans phrase="to act upon">')" accesskey="n" title="<__trans phrase="Unban commenter"> (n)" />
    </mt:unless>
    <mt:else>
    <input type="button" value="<__trans phrase="Trust">" onclick="doForMarkedInThisWindow(this.form, '<__trans phrase="commenter">', '<__trans phrase="commenters">', 'id', 'trust_commenter', {}, '<__trans phrase="to act upon">')" accesskey="t" title="<__trans phrase="Trust selected commenters"> (t)" />
    <input type="button" value="<__trans phrase="Ban">" onclick="doForMarkedInThisWindow(this.form, '<__trans phrase="commenter">', '<__trans phrase="commenters">', 'id', 'ban_commenter', {}, '<__trans phrase="to act upon">')" accesskey="b" title="<__trans phrase="Ban selected commenters"> (b)" />
    </mt:if>
    </mt:if>
</mt:setvarblock>
<mt:setvarblock name="html_head">
    <script type="text/javascript">
    <!--
    function enableFilterButton() {
        getByID("filter-button").style.display = "inline";
    }
    function toggleFilter() {
        var filterActive = getByID("filter-active");
        if (filterActive.style.display == "none") {
            filterActive.style.display = "block";
            getByID("filter-select").style.display = "none";
        } else {
            filterActive.style.display = "none";
            getByID("filter-select").style.display = "block";
        }
    }

    function setFilterCol(choice) {
        var sel = getByID('filter-select');
        if (!sel) return;
        sel.className = "filter-" + choice;
        if (choice == 'none')
            getByID('filter-mode').selectedIndex = 0;
        else {
            getByID('filter-mode').selectedIndex = 1;
            var fld = getByID('filter-col');
            if (choice == 'status')
                fld.selectedIndex = 0;
            else if (choice == 'commenter')
                fld.selectedIndex = 1;
            col_span = getByID("filter-text-col");
            if (fld.selectedIndex > -1 && col_span)
                col_span.innerHTML = '<strong>' +
                    fld.options[fld.selectedIndex].text + '</strong>';
        }
    }

    var tableSelect;
    function init()
    {
    	// setup
    	tableSelect = new TC.TableSelect( "commenter-listing-table" );
    	tableSelect.rowSelect = true;
    	setFilterCol(<mt:if name="filter">'<mt:var name="filter">'<mt:else>'none'</mt:if>);<mt:if name="filter">
    	setFilterVal('<mt:var name="filter_val">');
    </mt:if>
    }

    TC.attachLoadEvent( init );
    // -->
    </script>
</mt:setvarblock>
<mt:ignore>
                <mt:setvarblock name="list_filter_form">
                <form id="filter-form" method="get" action="<mt:var name="mt_url">">
                <input type="hidden" name="__mode" value="list_commenter" />
                <input type="hidden" name="blog_id" value="<mt:var name="blog_id">" />
                <input id="filter" type="hidden" name="filter" value="" />
                <input id="filter_val" type="hidden" name="filter_val" value="" />
                    <div class="filter">
                    <div id="filter-active">
                    <strong><__trans phrase="Filter">:</strong>
                    <mt:unless name="filter">
                    <a href="javascript:void(0)" onclick="toggleFilter()"><__trans phrase="None."></a> <span class="hint"><__trans phrase="(Showing all commenters.)"></span>
                    <mt:else>
                    <a href="javascript:void(0)" onclick="toggleFilter()"><__trans phrase="Showing only commenters whose [_1] is [_2]." params='<span id="filter-text-col">&nbsp;</span>%%<span id="filter-text-val"></span>'></a>
                    <mt:if name="feed_url">
                    <img src="<mt:var name="static_uri">images/status_icons/feed.gif" alt="<__trans phrase="Commenter Feed">" width="9" height="9" />
                    <a href="<mt:var name="feed_url" escape="html">" title="<mt:var name="feed_name" escape="html">"><__trans phrase="Commenter Feed"></a>
                    <mt:else>
                    <br /><a href="<mt:var name="script_url">?__mode=list_commenter<mt:if name="blog_id">&amp;blog_id=<mt:var name="blog_id"></mt:if>"><__trans phrase="Reset"></a>
                    </mt:if>
                    </mt:unless>
                    </div>
                    <div id="filter-select" style="display: none">
                    <__trans phrase="Show">
                    <select id="filter-mode" name="mode" onchange="if (this.options[this.selectedIndex].value == 'all') { setFilterCol('none') } else { setFilterCol('status') } enableFilterButton()">
                    <option value="all"><__trans phrase="all"></option>
                    <option value="only"><__trans phrase="only"></option>
                    </select>
                    <span id="filter-mode-all" style="display: none">
                    <__trans phrase="commenters.">
                    </span>
                    <span id="filter-mode-only" style="display: none">
                    <__trans phrase="commenters where">
                    <select id="filter-col" name="filter" onchange="setFilterCol(this.options[this.selectedIndex].value);enableFilterButton();">
                    <option value="status"><__trans phrase="status"></option>
                    <!--
                    <option value="commenter"><__trans phrase="commenter"></option>
                    -->
                    </select>
                    <__trans phrase="is">
                    <span id="filter-status" style="display: none">
                    <select id="status-val" name="filter_val" onchange="enableFilterButton()">
                    <option value="approved"><__trans phrase="trusted"></option>
                    <option value="neutral"><__trans phrase="untrusted"></option>
                    <option value="banned"><__trans phrase="banned"></option>
                    </select>
                    </span><!--
                    <span id="filter-commenter" style="display: none">
                    <select id="commenter-val" name="filter_val" onchange="enableFilterButton()">
                    <option value="unauthenticated"><__trans phrase="unauthenticated"></option>
                    <option value="authenticated"><__trans phrase="authenticated"></option>
                    <option value="trusted"><__trans phrase="trusted"></option>
                    </select>
                    </span>
                    -->
                    <__trans phrase=".">
                    </span>
                    &nbsp;
                    <input type="button" value="<__trans phrase="Filter">" id="filter-button" style="display: none" onclick="return execFilter(this.form)" />
                    <input type="button" value="<__trans phrase="Cancel">" onclick="toggleFilter()" />
                    </div>
                    </div>
                </form>
                </mt:setvarblock>
</mt:ignore>
<mt:include name="include/header.tmpl">
<mt:include name="include/commenter_table.tmpl">
<mt:include name="include/footer.tmpl">
