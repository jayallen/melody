<mt:if name="blog_id"><mt:setvarblock name="page_title"><__trans phrase="Blog Templates"></mt:setvarblock><mt:else><mt:setvarblock name="page_title"><__trans phrase="Global Templates"></mt:setvarblock></mt:if>
<mt:setvarblock name="related_content">
    <mtapp:widget
        id="quickfilters"
        label="<__trans phrase="Quickfilters">">
        <$mtapp:ListFilters$>
    </mtapp:widget>
    <mtapp:widget
        id="useful-links"
        label="<__trans phrase="Useful links">">
        <ul>
            <li><a href="<mt:var name="script_url">?__mode=list&amp;_type=template&amp;filter_key=backup_templates&amp;blog_id=<mt:var name="blog_id">" class="icon-left icon-related"><__trans phrase="Template Backups"></a></li>
        <mt:if name="can_edit_config">
            <li><a href="<mt:var name="script_url">?__mode=cfg_archives&amp;blog_id=<mt:var name="blog_id">" class="icon-left icon-related"><__trans phrase="Blog Publishing Settings"></a></li>
        </mt:if>
        </ul>
    </mtapp:widget>
    <$MTApp:PageActions from="list_template"$>
</mt:setvarblock>
<mt:setvarblock name="html_head" append="1">
<script type="text/javascript">
/* <![CDATA[ */
var tableSelect = [];
function init() {
<mt:loop name="template_type_loop">
    tableSelect.push(new TC.TableSelect( '<mt:var name="template_type">-listing-table' ));
    tableSelect[tableSelect.length-1].rowSelect = true;
</mt:loop>
}
TC.attachLoadEvent(init);
/* ]]> */
</script>
</mt:setvarblock>
<mt:setvarblock name="list_filter_form">
<form id="filter-form" method="get" action="<mt:var name="mt_url">">
    <input type="hidden" name="__mode" value="<mt:var name="mode">" />
    <input type="hidden" name="blog_id" value="<mt:var name="blog_id">" />
    <input id="filter" type="hidden" name="filter" value="" />
    <input id="filter_val" type="hidden" name="filter_val" value="" />
</form>
    <div class="listing-filter">
        <div class="listing-filter-inner inner pkg">
<form id="filter-select-form" method="get" onsubmit="return execFilter(this)">
    <div class="filter">
        <div id="filter-title">
        <mt:if name="filter_key">
            <strong><__trans phrase="Showing only: [_1]" params="<mt:var name="filter_label">"></strong>
            <a class="filter-link" href="<mt:var name="script_url">?__mode=list&amp;_type=template<mt:if name="blog_id">&amp;blog_id=<mt:var name="blog_id"></mt:if>">[ <__trans phrase="Remove filter"> ]</a>
        <mt:else>
            <strong><__trans phrase="All Templates"></strong>
        </mt:if>
        </div>
    </div>
</form>
    </div>
</div>
</mt:setvarblock>
<mt:setvarblock name="system_msg">
    <mt:if name="saved_deleted">
        <mtapp:statusmsg
            id="saved-deleted"
            class="success">
            <__trans phrase="You have successfully deleted the checked template(s).">
        </mtapp:statusmsg>
    </mt:if>
    <mt:if name="refreshed">
        <mtapp:statusmsg
            id="refreshed"
            class="success">
            <__trans phrase="You have successfully refreshed your templates.">
        </mtapp:statusmsg>
    </mt:if>
    <mt:if name="dynamic_set">
        <mtapp:statusmsg
            id="dynamic-set"
            class="success">
            <__trans phrase="Your settings have been saved.">
        </mtapp:statusmsg>
    </mt:if>
    <mt:if name="published">
        <mtapp:statusmsg
            id="published"
            class="success">
            <__trans phrase="Your templates have been published.">
        </mtapp:statusmsg>
    </mt:if>
    <mt:if name="saved_copied">
        <mtapp:statusmsg
            id="saved-copied"
            class="success">
            <__trans phrase="Selected template(s) has been copied.">
        </mtapp:statusmsg>
    </mt:if>
</mt:setvarblock>

<mt:include name="include/header.tmpl">

<mt:loop name="template_type_loop">
<mt:if name="__first__">
<$mt:var name="list_filter_form"$>
</mt:if>
<$mt:include name="include/template_table.tmpl"$>
</mt:loop>

<mt:include name="include/footer.tmpl">
