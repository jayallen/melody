<script type="text/javascript">
<!--
function calcDim (val, type, full) {
    return val.value;
}

function adjustPixelsPct (f, width) {
//    if (!f.constrain.checked) return;
    var e, s, full;
    if (width) {
        e = f.thumb_width;
        s = f.thumb_width_type;
        full = f.full_width.value;
    } else {
        e = f.thumb_height;
        s = f.thumb_height_type;
        full = f.full_height.value;
    }
    e.value = Math.floor(full * e.value / 100);
    return true;
}

function checkThumbs(f) {
    f = document.forms[0];
    adjustWidthHeight(f,1);
}

function adjustWidthHeight (f, width) {
//    if (!f.constrain.checked) return;
    var w = f.thumb_width;
    var wt = f.thumb_width_type;
    var wf = f.full_width.value;
    var h = f.thumb_height;
    var ht = f.thumb_height_type;
    var hf = f.full_height.value;
    var pct;
    var s = width ? wt : ht;
    pct = width ? (w.value / wf) : (h.value / hf);
    var e = width ? h : w;
    var s = width ? ht : wt;
    var full = width ? hf : wf;
    e.value = Math.floor(pct * full);
    return true;
}

function widthKeyPress(e) {
    var key;
    if (window.event) {
        key = window.event.keyCode;
        e = window.event;
    } else if (e)
        key = e.which;
    else
        return true;
    if (( key == null) || ( key == 0 ) || ( key == 8 ) || 
        ( key == 9 ) || ( key == 13 ) || ( key == 27 ))
        return true;
    if (key > 60000) // handles range of special keys such as arrow keys
        return true;
    if (e.ctrlKey || e.altKey)
        return true;
    if ((e.charCode < 48) || (e.charCode > 57))
        return TC.stopEvent(e);
    return true;
}

//-->
</script>
<mt:if name="do_thumb">
<input type="hidden" name="full_width" value="<mt:var name="width">" />
<input type="hidden" name="full_height" value="<mt:var name="height">" />
</mt:if>

    <div id="new_entry_prefs" style="display:block;">
    <strong><__trans phrase="Display Options"></strong>

        <div class="upload_indent_choices">
        <p><label><input type="checkbox" name="include" value="1" checked="checked" onclick="toggleSubPrefs(this); return true;" /> <__trans phrase="Display Image in Entry"></label></p>

            <div id="include_prefs" style="display:block;">

            <input type="hidden" name="wrap_text" value="1" />
            <p><__trans phrase="Alignment">: <span class="align_left_icon"><img align="absbottom" src="<mt:var name="static_uri">images/spacer.gif" alt="<__trans phrase="Align Image Left">" width="16" height="17" /></span> <input type="radio" name="align" value="left" <mt:if name="align_left">checked="checked" </mt:if>/> <__trans phrase="Left"> <span class="align_center_icon"><img align="absbottom" src="<mt:var name="static_uri">images/spacer.gif" alt="<__trans phrase="Align Image Center">" width="16" height="17" /></span> <input type="radio" name="align" value="center" <mt:if name="align_center">checked="checked" </mt:if>/> <__trans phrase="Center"> <span class="align_right_icon"><img align="absbottom" src="<mt:var name="static_uri">images/spacer.gif" alt="<__trans phrase="Align Image Right">" width="16" height="17" /></span> <input type="radio" name="align" value="right" <mt:if name="align_right">checked="checked" </mt:if>/> <__trans phrase="Right"></p>

            <mt:if name="do_thumb">
            <p><input type="checkbox" name="thumb" value="1" <mt:if name="make_thumb">checked="checked" </mt:if>/> <__trans phrase="Create Thumbnail"> <a href="javascript:void(0)" onclick="return openManual('file_upload', 'creating_thumbnails')" class="help-link">?</a>
            <label for="thumb_width"><__trans phrase="Width">:</label>
            <input name="thumb_width" id="thumb_width" value="<mt:var name="thumb_width">" onkeypress="widthKeyPress(event)" onchange="adjustWidthHeight(this.form, 1)" size="4" />
            <input type="hidden" name="thumb_height" value="<mt:var name="thumb_height">" onchange="adjustWidthHeight(this.form, 0)" size="4" />
            <__trans phrase="Pixels">
<img onload="checkThumbs('now');" src="<mt:var name="static_uri">images/spacer.gif" alt="" width="1" height="1" />
            </p>
            </mt:if>

            <p><input type="checkbox" name="popup" value="1" <mt:if name="popup">checked="checked" </mt:if>/> <__trans phrase="Link image to full-size version in a popup window."></p>
            <mt:if name="can_save_image_defaults">
            <p><input type="checkbox" name="image_defaults" value="1" /> <__trans phrase="Remember these settings"></p>
            </mt:if>

            </div>

        </div>
    </div>
