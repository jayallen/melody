<mt:setvarblock name="page_title"><__trans phrase="Widgets"></mt:setvarblock>
<TMPL_INCLUDE NAME="include/header.tmpl">

<script type="text/javascript" src="<TMPL_VAR NAME=STATIC_URI>plugins/WidgetManager/js/app.js"></script>
<script type="text/javascript">
<!--
var tableSelect;
function init()
{
<TMPL_UNLESS NAME=IS_POWER_EDIT>
    // setup
    tableSelect = new TC.TableSelect( "selector" );
    tableSelect.rowSelect = true;
</TMPL_UNLESS>

    setFilterCol(<TMPL_IF NAME=FILTER>'<TMPL_VAR NAME=FILTER>'<TMPL_ELSE>'none'</TMPL_IF>);<TMPL_IF NAME=FILTER>
    setFilterVal('<TMPL_VAR NAME=FILTER_VAL>');
</TMPL_IF>
}

function setFilterCol(choice) {
    var sel = getByID('filter-select');
    if (!sel) return;
    sel.className = "filter-" + choice;
    if (choice == 'none')
        getByID('filter-mode').selectedIndex = 0;
    else {
        getByID('filter-mode').selectedIndex = 1;
        var fld = getByID('filter-col');
        if (choice == 'status')
            fld.selectedIndex = 0;
        else if (choice == 'commenter')
            fld.selectedIndex = 1;
        col_span = getByID("filter-text-col");
        if (fld.selectedIndex > -1 && col_span)
            col_span.innerHTML = '<strong>' +
                fld.options[fld.selectedIndex].text + '</strong>';
    }
}

TC.attachLoadEvent( init );
// -->
</script>

<TMPL_IF NAME=REBUILD>
<h4 class="message"><__trans phrase="Your changes to the widget container have been saved."> <TMPL_INCLUDE NAME="include/rebuild_stub.tmpl"></h4>
</TMPL_IF>

<TMPL_IF NAME=DELETED>
<h4 class="message"><__trans phrase="You have successfully deleted the selected widget container(s) from your blog."> <TMPL_INCLUDE NAME="include/rebuild_stub.tmpl"></h4>
</TMPL_IF>

<p><__trans phrase="To add a widget container to your templates, use the following syntax:"></p>
<p><__trans phrase="<strong>&lt;$MTWidgetManager name=&quot;Name of the Widget Manager&quot;$&gt;</strong>"></p>

<div class="list-wrapper">

<img src="<TMPL_VAR NAME=STATIC_URI>images/status_icons/create.gif" alt="<__trans phrase="Add Widget Manager">" width="9" height="9" />
    <a href="?__mode=edit_widget&blog_id=<TMPL_VAR NAME=BLOG_ID>&widgetmanager=New+Widget+Manager"><__trans phrase="Create Widget Container"></a>
</div>

<form method="get" action="<TMPL_VAR NAME=SCRIPT_URL>">
<input type="hidden" name="__mode" value="delete_widget" />
<input type="hidden" name="blog_id" value="<TMPL_VAR NAME=BLOG_ID>" />

<div class="list-actions">
<div class="button-bar">
<input type="button" name="delete" value="<__trans phrase="Delete">" onclick="doRemoveItems(this.form, '<__trans phrase="Widget Manager">', '<__trans phrase="Widget Managers">')" accesskey="x" title="<__trans phrase="Delete selected Widget Managers (x)">" />
</div>
</div>

<div class="list" id="selector">
<table cellspacing="0">
  <thead>
  <tr>
    <th width="1%" class="cb"><input type="checkbox" name="id-head" value="all" class="select" /></th>
    <th><__trans phrase="Name"></th>
    <th><__trans phrase="Installed Widgets"></th>
  </tr>
  </thead>
  <tbody>
<TMPL_LOOP NAME=WIDGETMANAGERS>
  <tr class="<TMPL_IF __ODD__>odd<TMPL_ELSE>even</TMPL_IF>">
    <td class="cb"><input type="checkbox" name="id" value="<TMPL_VAR NAME=WIDGETMANAGER>" class="select" /></td>
    <td class="widgetmanager-name"><a href="?__mode=edit_widget&blog_id=<TMPL_VAR NAME=BLOG_ID>&widgetmanager=<TMPL_VAR NAME=WIDGETMANAGER>"><TMPL_VAR NAME=WIDGETMANAGER></a></td>
    <td class="widgetmanager-widgets"><TMPL_VAR NAME=NAMES></td>
  </tr>
</TMPL_LOOP>
</form>
</table>
</div>

</div>


<TMPL_INCLUDE NAME="include/footer.tmpl">
